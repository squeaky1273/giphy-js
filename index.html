<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>GiphyJS</title>
        <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="style.css">
    </head>
    <body>

        <div class="container">
            <header>
                <h1>GiphyJS Search</h1>
            </header>
            <form id="search-form">
                <input id="search-input" type="text" placeholder="search">
                <button type="submit">Search</button>
            </form>

            <div id="results" class="results">
                <!-- gif images here -->
            </div>
        </div>

        <!-- Script -->
        <script>

            const searchForm = document.getElementById('search-form')
            const searchInput = document.getElementById('search-input')
            const resultsEl = document.getElementById('results')

            searchForm.addEventListener('submit', function(e) {
                e.preventDefault()
                const q = searchInput.value
                search(q)

            })

            function search(q) {
                const apikey = 'AO494tEsU7J485MBG9k0EPeCbpXpporV'
                const path = `https://api.giphy.com/v1/gifs/search?api_key=${apikey}&q=${q}`
    
                fetch(path)
                    .then(function(res) {
                        return res.json() 
                    })
                    .then(function(json) {
                        console.log(json.data[0].images.fixed_width.url)
                        let resultsHTML = ''
    
                        json.data.forEach(function(obj) {
                            console.log(obj)
    
                            const url = obj.images.fixed_width.url
                            const width = obj.images.fixed_width.width
                            const height = obj.images.fixed_width.height
                            const title = obj.title
                            resultsHTML += `<img src="${url}" width="${width}" height="${height}" alt="${title}">`
                        })
    
                        resultsEl.innerHTML = resultsHTML
                    })
                    .catch(function(err) {
                        console.log(err.message)
                })
            }
            //

        </script>
        <footer>
            <p class="footer-text">Made with <a href="https://giphy.com/"> GIPHY</a> api & <a href="https://github.com/soggybag">Soggybag's</a> tutorial</p>
        </footer>
    </body>
</html>